# Анализ целевой архитектуры проекта

Этот документ описывает финальное состояние проекта после полной интеграции frontend и backend частей согласно `ACTION_PLAN.md`.

## 1. Общая архитектура

Проект будет представлять собой современное **Single Page Application (SPA)** с четким разделением ответственности:

*   **Backend (Django/DRF):** Выступает в роли headless-сервиса. Его единственная задача — предоставлять защищенный, структурированный REST API для управления данными (CRUD-операции) и выполнять бизнес-логику.
*   **Frontend (React/TypeScript):** Полностью отвечает за пользовательский интерфейс, рендеринг, управление состоянием и взаимодействие с пользователем. Вся логика отображения находится на клиенте.
*   **Канал связи (API & WebSockets):**
    *   **REST API:** Основной способ обмена данными между клиентом и сервером.
    *   **WebSockets:** Используются для real-time обновлений, в первую очередь для системы уведомлений (`notifications`).

## 2. Целевая архитектура Frontend

После завершения интеграции frontend-приложение будет иметь следующую модульную и масштабируемую структуру:

### Модульность по доменам
Структура директорий `src` будет полностью отражать бизнес-домены, определенные в Django-приложениях. Для каждой сущности (Deal, Adviser, Product) будет свой набор файлов:
*   `features/<entity>/<entity>ApiSlice.ts`: Инкапсулирует всю логику API-запросов для данной сущности.
*   `pages/<Entity>Page.tsx`: Компонент страницы, который использует соответствующий `ApiSlice` для получения и отображения данных.
*   `types/<entity>.ts`: TypeScript-интерфейс, обеспечивающий типобезопасность для данных, полученных с бэкенда.

### Управление состоянием (State Management)
*   **Серверное состояние:** **RTK Query** станет единственным источником правды для всех данных, получаемых с сервера. Это устранит необходимость в ручном управлении состоянием загрузки/ошибок и кэшированием. Приложение будет эффективно кэшировать данные, автоматически обновляя их при мутациях (создание, обновление, удаление).
*   **Клиентское состояние:** Глобальное состояние, не связанное с сервером (статус аутентификации пользователя, настройки интерфейса, открытые модальные окна), будет управляться через простые срезы Redux Toolkit, такие как `authSlice` и `uiSlice`.

### Пользовательский опыт (UX)
*   **Бесшовная навигация:** Пользователь сможет перемещаться по всем разделам админ-панели без перезагрузки страницы.
*   **Оптимистичный UI:** Благодаря RTK Query, интерфейс будет реагировать на действия пользователя мгновенно.
*   **Real-time уведомления:** Интеграция с `notifications` app через WebSockets позволит пользователям получать актуальные оповещения в реальном времени.
*   **Единообразие:** Все модули (`Сделки`, `Клиенты`, `Продукты` и т.д.) будут иметь схожую структуру и внешний вид, что упростит их использование.

## 3. Результат

В итоге мы получим **полнофункциональную, быструю и масштабируемую корпоративную систему** для управления комиссиями. Архитектура позволит легко добавлять новые модули в будущем, просто повторяя описанный паттерн:
1.  Создать Django-приложение на бэкенде.
2.  Создать соответствующий набор файлов (`ApiSlice`, `Page`, `Type`) на фронтенде.
3.  Добавить ссылку в навигацию.

Это обеспечит долгосрочную поддержку и развитие проекта с минимальными усилиями.

