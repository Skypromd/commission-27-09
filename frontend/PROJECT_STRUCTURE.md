# Commission Tracker Admin Panel - Архитектура и структура проекта

Этот документ описывает архитектуру и структуру фронтенд-части проекта Commission Tracker.

## Технологический стек

- **Фреймворк**: React
- **Язык**: TypeScript
- **Сборщик**: Vite
- **Управление состоянием и данными**: Redux Toolkit (RTK) с RTK Query
- **UI-компоненты**: Ant Design
- **Стилизация**: Tailwind CSS
- **Маршрутизация**: React Router

## Архитектурные принципы

1.  **Feature-Sliced Design (FSD)**: Логика приложения сгруппирована по функциональным модулям ("фичам"), таким как `auth`, `mortgages`, `policies`. Это делает проект масштабируемым и легко поддерживаемым.
2.  **DRY (Don't Repeat Yourself)**: Общая логика и UI вынесены в переиспользуемые компоненты. Яркий пример — `ResourcePage.tsx`, который используется для отображения списков ипотек и полисов, избегая дублирования кода.
3.  **Single Source of Truth**: Redux Store является единственным источником состояния для всего приложения, включая данные с сервера, кэшированные RTK Query.

## Структура директорий (`src`)

-   `main.tsx`: Точка входа приложения. Здесь происходит инициализация React, подключение Redux `Provider` и `BrowserRouter`.
-   `App.tsx`: Корневой компонент приложения. Отвечает за основную маршрутизацию (публичные и защищенные маршруты) и рендеринг основного `Layout` приложения.
-   `index.css`: Базовые стили Tailwind CSS.
-   `types/`: Содержит глобальные TypeScript-типы и интерфейсы для моделей данных (например, `Mortgage`, `Policy`).

### `components/`

Директория для переиспользуемых, "глупых" (dumb) компонентов, которые не содержат сложной бизнес-логики.

-   `ProtectedRoutes.tsx`: Компонент-обертка, который защищает дочерние маршруты, проверяя наличие токена аутентификации.
-   `ResourcePage.tsx`: **Ключевой компонент архитектуры**. Универсальный компонент для отображения списка ресурсов. Он принимает в качестве пропсов хук для запроса данных и конфигурацию колонок, что позволяет использовать его для любой сущности (ипотеки, полисы и т.д.).

### `services/`

Слой для взаимодействия с внешним миром.

-   `api.ts`: Ядро RTK Query. Здесь создается базовый API-сервис с помощью `createApi`. Он настраивает `baseQuery` (включая автоматическое добавление токена авторизации в заголовки) и определяет `tagTypes` для кэширования.

### `store/`

Все, что связано с Redux.

-   `store.ts`: Конфигурация Redux Store. Здесь объединяются все `reducers` (включая редьюсер от RTK Query) и `middleware`.

### `features/`

Основная логика приложения, разделенная по доменным областям.

-   `auth/`: Все, что связано с аутентификацией.
    -   `authSlice.ts`: Управляет состоянием аутентификации (хранит токен).
    -   `authApiSlice.ts`: Определяет эндпоинт для логина (`login` mutation).
-   `mortgages/`: Все, что связано с ипотекой.
    -   `mortgagesApiSlice.ts`: Определяет эндпоинты для работы с ипотекой (`getMortgages` query).
-   `policies/`: Все, что связано с полисами.
    -   `policiesApiSlice.ts`: Определяет эндпоинты для работы с полисами (`getPolicies` query).

### `pages/`

"Умные" (smart) компоненты, которые представляют собой целые страницы приложения. Они собирают воедино компоненты из `components/` и используют хуки из `features/` для получения данных.

-   `Login.tsx`: Страница входа.
-   `Dashboard.tsx`: Главная панель управления.
-   `Mortgages.tsx`: Страница со списком ипотек. Использует `ResourcePage` и передает в него `useGetMortgagesQuery`.
-   `Policies.tsx`: Страница со списком полисов. Использует `ResourcePage` и передает в него `useGetPoliciesQuery`.
